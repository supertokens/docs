---
id: selection-tutorial
title: Guided Tutorial
hide_title: true
---

import Architecture from "/src/components/guides/Architecture"
import FolderStructureNoSeparateNodeServer from "/guides/folderStructure/noSeparateNodeServer.mdx"
import DisplaySelection from "/src/components/guides/DisplaySelection"
import RenderBackendConfigPath from "/src/components/guides/RenderBackendConfigPath"
import RenderAPIDomain from "/src/components/guides/RenderAPIDomain"
import { Condition } from "/src/components/guides/Condition"
import { GuidePageContextProvider, ToggleShowOnlySelected } from "/src/components/guides/GuidePageContext"
import RenderWebsiteDomain from "/src/components/guides/RenderWebsiteDomain"
import IsMobileFrontend from "/src/components/guides/IsMobileFrontend"
import IsWebFrontend from "/src/components/guides/IsWebFrontend"
import StackViewer from "/src/components/guides/StackViewer"
import IsRecipeInit from "/src/components/guides/IsRecipeInit"
import RenderDashboardRoute from "/src/components/guides/RenderDashboardRoute"
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

<GuidePageContextProvider>


# Guided Tutorial

<!-- To Do:  -->
<!-- - [x] Decide on the document structure -->
<!-- - [ ] Add an initial draft with just the text content -->
<!-- - [ ] Add code snippets -->
<!-- - [ ] Add the correct reference links to the docs -->
<!-- - [ ] Improve the text based on feedback -->
<!-- - [ ] Add the images -->
<!-- - [ ] Add a proper component that will show your selection    -->
<!-- - [ ] Improve the guide selection form -->
    
<ToggleShowOnlySelected />

## Your Selection


<DisplaySelection />


## Architecture Overview

<Condition
  match={
   (selection) => ['java', 'c#', 'php'].includes(selection.applicationServer) || (['multi-tenant', 'mfa'].includes(selection.selectedAuthMethod) && selection.backend !== 'nodejs')
  }
  title="No SDK Support"
>

:::note
For custom architecture we will need an image without "PHP server". Just say "Your API" or something like that.
:::

![Architecture Schema](/img/other-framework-setup.png)



<Condition match={(selection) => ['java', 'c#', 'php'].includes(selection.applicationServer)} title="Java/C#/PHP">

We do not have an SDK in the language that you have chosen. You will have to deploy
and expose a separate authentication server from your infrastructure. 

</Condition>

<Condition title="Go/Python with MTA/MFA" match={selection => (['multi-tenant', 'mfa'].includes(selection.selectedAuthMethod) && selection.backend !== 'nodejs')}>

At the moment we do not support the authentication method that you chose, in the language SDK. You will have to deploy a separate Node.js server 
and expose the authentication routes.

</Condition>


Let's look at the example above to better understand how everything should be set up.
The diagram shows a simple architecture in which a client frontend communicates, through a reverse proxy, with both the Node.js server 
and your existing backend API. The authentication flow will work in the following way:
1. The **Frontend** will query the `Node.js` server for the authentication routes and it will call those routes to login.
2. The `Node.js server` will use the **Backend SDK** to communicate with the **SuperTokens Core Service** and complete the login attempt. It will then return a session token to the frontend app. 
3. The **Frontend** will store the token and include it in the `Authorization` header of the API calls directed to your existing backend API.
4. Inside your existing server you will have to [verify](/docs/verify) the session using any JWT library of your choice in order to protect your routes.
5. If your existing server returns `401` responses, the **Frontend** will automatically refresh the authentication flow.

To get a more extensive walkthrough on how the SuperTokens Architecture works, please refer to [this page](/docs/architecture).

You can also find out more instructions on how to deploy a separate authentication server in our [extensive guide](/docs/community/other-frameworks).

</Condition>


<Condition
  title="With SDK Support" 
  match={selection => selection.backend === 'nodejs' || (!['multi-tenant', 'mfa'].includes(selection.selectedAuthMethod) && ['go', 'python', 'nextjs'].includes(selection.backend))}
>


<Tabs defaultValue="ms"
values={[
{label: 'Managed service', value: 'ms'},
{label: 'Self hosted', value: 'ss'},
]}>
<TabItem value="ms">
<img src="/img/architecture/managed_service_without_dashboard.png" alt="Flowchart of architecture when using SuperTokens managed service" />
</TabItem>
<TabItem value="ss">
<img src="/img/architecture/self_hosted_without_dashboard.png" alt="Flowchart of architecture when self-hosting SuperTokens" />
</TabItem>
</Tabs>


You can directly integrate SuperTokens in your existing services. The authentication routes will be properly exposed based on your configuration.
There are three main components that you need to keep in mind here:
- The **Frontend SDK** - Provides pre built UI components and functions to manage authentication from your frontend app.
- The **Backend SDK** - Comunicates with the **Core Service** and provides a middleware which exposes all the auth related APIs for your frontend to call. It also handles session management and access control for your APIs.
- The **SuperTokens Core Service** - This is called by the backend SDK to maintain state in the database. This can either be self hosted using docker or be managed by us if you sign up on supertokens.com

:::note 
Should we explain other terms here? Like Recipes 
:::

To get a more extensive walkthrough on how the SuperTokens Architecture works, please refer to [this page](/docs/architecture).

</Condition>

## Project Structure

<Condition
  title="Has Starter Project"
  match={selection => (['react', 'angular', 'vue', 'nextjs'].includes(selection.frontend)) }
>

Use our starter project to get up and running quickly. It comes with full config examples 
based on your selection. Just run the following command to install everything:

```bash
npx create-supertokens-app@latest some-arguments 
```


<Condition title="Default App Structure" match={selection => ['golang', 'nodejs', 'python'].includes(selection.backend)}>

The project that you just downloaded is split into two parts:



### `/backend`

This folder includes a sample server that exposes the authentication routes.


<Condition title="Nodejs Express" match={selection => (selection.backend === "nodejs" && selection.backendFramework === "express")}>

There are two files included in this project. 

##### `config.ts`

As the name suggests, this file configures the SuperTokens SDK and the features that your instance will use.
In it, you will find examples for the following setup steps:

1. Connecting to the **SuperTokens Core Service**. Replace the endpoint with the correct one based on your configuration. 
2. Specifying details about your application. Update the `appInfo` section with information specific to your application. 
3. Selecting and initialising the authentication **recipes** that you need. You will have to modify the parameters values with your own configuration values. We will go into detail about each recipe in the next sections. 
4. Configuring additional functionality like session or user management


##### `index.ts`

This file initializes a simple Express server that makes use of two functions to expose the auth functionalities:
- `middleware`: This adds the authentication routes to the Express App 
- `errorHandler`: This manages the errors that can be thrown in the authentication flows and includes standardized responses

There are also examples on how to configure CORS, and how to setup two additional endpoints. One for managing session data and one for working with tenants. 

:::note
should we specify the tenant endpoint info only if it is set in the config?
:::

</Condition>

  <Condition title="Node.js/NestJS" match={selection => (selection.backend === "nodejs" && selection.backendFramework === "nestjs")}>

##### `/auth`

This section can be copy and pasted directly into your existing project without any additional changes. 
In here you will find abstractions for initializing the **SDK**, communicating with the [**SuperTokens Core Service**](/core-service) and common **NestJS** utilities like `guards`, `filters`, `decorators` and `middlewares`.

The middleware file, `auth.middleware.ts`, will include the authentication routes that will enable the login flows to your users.

##### `config.ts`

In here you define a set of constants that describe configurations details on how the authentication flows will work based on your specific use case.
The file includes information on the general app config that you should provide, the [SuperTokens Core Service](/core-service) endpoint, and the [recipes](/recipes) that will be used in your deployment.

You will have to update each variable based on your configuration.
- `connectionURI`: This is the URI of the **SuperTokens Core Service**. Replace the endpoint with the correct one based on your configuration.
- `appInfo`: This is an object that describes your application. Update the `appInfo` section with information specific to your application.
- `recipeList`: This is an array of recipes that you will need to modify with your own configuration values. We will go into detail about each recipe in the next sections.

##### `app.controller.ts`

Check this file for examples on how to use the guards and decorators exposed by the `/auth` folder. This way you can protect your endpoints and access session specific data.

##### `app.module.ts`

Provides an example of how to import the authentication functionality in your main **NestJS** module.

##### `module.ts`

Includes a `bootstrap` call that configures CORS and sets up an exception filter that will catch any authentication related errors and return proper responses.

</Condition>

<Condition title="Python/FastApi" match={selection => (selection.backend === "python")}>

:::note
How do we include framework specific info? Do we extend the form options?
:::

##### `config.py`

The config file exports a series of variables that will be used to initialize the **SuperTokens SDK** and specify which authentication flows to include.
In here you will find examples on how to:

- Setup the the **SuperTokens Core Service** connection. Replace the endpoint with the correct one based on your configuration.
- Specify details about your application. Update the `app_info` section with information specific to your application.
- Describe which authentication **recipes** your app will use. You will have to modify the parameters values with your own configuration values. We will go into detail about each recipe in the next sections.
- Configure additional functionality like session or user management

##### `app.py`

This is where the SDK gets initialised based on the configuration that we have previously defined. 
The authentication routes get included in your app through the `get_middleware` call.
Other than that, the file includes examples on how you can secure your routes, manage session data, and how to configure CORS settings so that authenticaiton will properly work.

</Condition>

  <Condition title="Go" match={selection => (selection.backend === "golang")}>

##### `config.go`

The config file exports a variable that will be used to initialize the **SuperTokens SDK** and specify which authentication flows to include.
In here you will find examples on how to:

- Setup the the **SuperTokens Core Service** connection. Replace the endpoint with the correct one based on your configuration.
- Specify details about your application. Update the `AppInfo` section with information specific to your application.
- Describe which authentication **recipes** your app will use. You will have to modify the parameters for each recipe with your own configuration values. We will go into detail about each recipe in the next sections.
- Configure additional functionality like session or user management

##### `main.go`

This is where the SDK gets initialised based on the configuration that we have previously defined. 
The authentication routes get included in your app through the `supertokens.Middleware` call.
Other than that, the file includes examples on how you can secure your routes, manage session data, and how to configure CORS settings so that authenticaiton will properly work.

We will include references to these files throught the following sections. This way you fill find concrete instructions on how and what to change based on your selected recipes and setup. 

</Condition>

### `/frontend`

This folder includes a basic *SPA*, single page app, that uses the [SuperTokens Frontend SDK](/frontend-sdk) and a series of prebuilt components to provide an 
authentication UI for users.

  <Condition title="React" match={selection => (selection.frontend === "react")}>

##### `config.ts`

This file exports two main constants. The `SuperTokensConfig` object that describes the properties that should be used when we initialise the SDK.
The `PreBuiltUIList`, which includes a series of prebuilt components that will be used in the authentication flows. 
In here you will have to adjust the `getApiDomain` and `getWebsiteDomain` functions based on your existing app setup.  
Besides that you will also have to change the configuration options for each specific authentication recipe. But we will get into more specific on this details in the next sections.

##### `App.tsx`

Here is where we make use of the previously defined config and we start everything off.
1. The SDK gets initialised based on the configuration that we have previously defined. 
2. The entire app tree is wrapped with the `SuperTokensWrapper` component. This will provide a state context that can be used in our next components.
2. The authentication routes get included by calling `getSuperTokensRoutesForReactRouterDom` with our previously defined UI list.
3. Routes that should be protected by the SDK are wrapped with the `SessionAuth` component

</Condition>

  <Condition title="Angular" match={selection => (selection.frontend === "angular")}>

##### `config.ts`

This file exports two functions:
- `initSuperTokensUI` 
- `initSuperTokensWebJS`, 
In here you will have to adjust the `appInfo` section based on your existing app setup. 
Besides that you will also have to change the configuration options for each specific authentication [recipe](/recipes). But we will get into more specific on this details in the next sections.

##### `app/auth`

This folder can be copy and pasted directly into your existing project without any additional changes.
It initializes the UI code and configures the routes that will be used to authenticate your users.

##### `app/app-routing.module.ts`

An example of how to integrate the authentication router into your main app router.

##### `app/app.component.ts`

This is where we initialize the **SuperTokens SDK**.

:::note
Explain what the SDK will do in the project
:::

##### `home/home.component.ts`

In this file you will find examples on how to work with session specific data, like user details.

</Condition>

<Condition title="Vue" match={selection => (selection.frontend === "vue")}>


##### `config.ts`

This file exports two functions:
- `initSuperTokensUI` 
- `initSuperTokensWebJS`, 
In here you will have to adjust the `appInfo` section based on your existing app setup. 
Besides that you will also have to change the configuration options for each specific authentication [recipe](/recipes). But we will get into more specific on this details in the next sections.

##### `/views/AuthView.vue`

You can copy and paste this file directly into your existing project without any additional changes. It will initialize the authentication UI components.
You can then import the `view` in the main app router by following the example from `/router/index.ts`.

##### `/views/HomeView.vue`

Check this file for examples on how to work with authentication session data.

##### `/main.ts`

This is where we initialize the **SuperTokens SDK**.

:::note 
Explain what the SDK will do in the project
:::

</Condition>

</Condition>

<Condition title="For Next.js" match={selection => (selection.frontend === "nextjs")}>

:::note
Do we include options about the app router version in the initial form? 
:::

The command creates a sample Next.js app with authentication configured to work with SuperTokens.
Bellow, we go through the main files that you will need to copy/update based on your setup.

##### `/config`

- `appInfo.ts` 
Includes information about your application. Update it with details specific to your environment.

- `backend.ts`
Exports a function that provides configuration instructions for the [SuperTokens Backend SDK](/backend-sdk).
You will have to update the `supertokens` object with information specific to your account. 
Besides that, in the recipes list, you shuld change the parameters values with your own configuration values. We will go into detail about each recipe in the next sections.  

- `frontend.tsx`

You can copy and paste this file directly into your existing project without any additional changes. It uses the config values that you defined in the `appInfo.ts` file as well as the authentication
recipes that you have selected.

##### `/api/auth`

This folder includes a file that sets up the authentication endpoints. You can copy it into your existing project without any additional changes.

##### `/api/user`

In here you will find an example of how to expose session related data through an endpoint.

You can notice that each api function makes use of `ensureSuperTokensInit`. This way you can make sure that you are initializing the **SuperTokens Backend SDK** once.   

##### `/auth`

This folder includes a file that will add the authentication routes for the web client. You can copy and paste this file directly into your existing project without any additional changes.
It will include the prebuilt UI components based on the configuration that was set in the `frontend.tsx` file.

##### `layout.tsx`

Here is where you add the `SuperTokensProvider` component over your existing layout. This way we provide the authentication context to all the pages in your app.
The component is defined in the `/components/supertokensProvider.tsx` file. It initializes the **SuperTokens React SDK** and exports the component.

:::note
Can this just be a next config plugin?
:::

</Condition>

</Condition>

<Condition 
title="Does not have a Starter Project"
match={selection => (!['react', 'angular', 'vue', 'nextjs'].includes(selection.frontend)) }
>

#### Backend Service Structure 

<Condition title="Uses a backend that does not have an SDK" match={true}>

Follow the steps described [here](/docs/community/other-frameworks) to get a better understanding on how you can spin up a separate authentication server and the integrate it in your existing backend infrastructure.

After that, check the [recipe guide](/recipe) that will show you the configuration steps necessary for your use case.

</Condition>

<Condition title="Uses an SDK with backend support" match={true}>

In order to enable the SuperTokens authentication flows you will have to setup the [Backend SDK](/backend-sdk) in your existing server.

To to this please follow the steps described [here](/docs/different-link-based-on-recipes).

</Condition>
  
#### Frontend Structure 

<Condition title="React" match={true}>

Explain how to use the prebuilt components and where to place them.
    
<Condition title="Custom UI" match={true}>

Show how to develop custom UI components based on the framework SDK.

</Condition>

</Condition>

<Condition title="Angular" match={true}>

<Condition title="Custom UI" match={true}>

Show how to develop custom UI components based on the framework SDK.

</Condition>

</Condition>

<Condition title="Vue" match={true}>

<Condition title="Custom UI" match={true}>

Show how to develop custom UI components based on the framework SDK.
Link to github examples.
Explain how to create different components and how to call  the authentication functions.

</Condition>

</Condition>

<Condition title="Mobile App" match={true}>

Links to relevant example apps

</Condition>

<Condition title="Vanilla JS" match={true}>

Link to web-js + vue example app

</Condition>
  
</Condition>

## Recipes

:::note
The recipes will be visible based on the selection states:
- multi-tenant - show everything (including mfa)
- mfa - show all the auth recipes
- otherwise - show only the selected auth recipes
:::

<Condition title="Multi-tenant Authentication" match={true}>

### Multi-tenant Authentication

<Condition title="With example app" match={true}>

- How tenants can be created
  - Api/SDK calls

- frontend  How getTenantId works 

  <Condition title="Has Dashboard" match={true}>

   How you can confgure MTA from the dashboard

  </Condition>

</Condition>

<Condition title="Frontend - Mobile App" match={true}>

- Explain how the tenantId neeeds to be part of the api calls

</Condition>

<Condition title="Frontend - web-js" match={true}>

- Explain that they need to provide the implementation for getTenantId

</Condition>

</Condition>

<Condition title="Multi-factor Authentication" match={true}>

### Multi-factor Authentication

How to configure MFA factors

<Condition title="Frontend - React/Nextjs" match={true}>

- Explain why the prebuilt UI is added in Auth component compared to adding it in the routes

</Condition>

<Condition title="Frontend - Angular/Vue" match={true}>

- Talk about their specific setup (with examples)

</Condition>

<Condition title="Frontend - Mobile App" match={true}>

- Claims setup and how to use API calls 

</Condition>

<Condition title="Frontend - Web-js" match={true}>

- Claims setup and how to use lib calls 

</Condition>

<Condition title="Has Dashboard" match={true}>

How you can confgure MFA from the dashboard

 </Condition>

</Condition>

<Condition title="Email/Password Authentication" match={true}>
  

### Email/Password Authentication


<Condition title="Backend - Using SDK" match={true}>

Point to the SDK config and the fields that need to be set

</Condition>

<Condition title="Frontend - Prebuilt UI" match={true}>

Point to the component that is used and how to integrate it

</Condition>

<Condition title="Mobile App" match={true}>

  Explain how this works for mobile apps

</Condition>

</Condition>

<Condition title="Social/Enterprise Login" match={true}>

### Social/Enterprise Login 

<Condition title="Backend - Using SDK" match={true}>

Point to the SDK config and the fields that need to be set

</Condition>

<Condition title="Frontend - Prebuilt UI" match={true}>

Point to the component that is used and how to integrate it

</Condition>

<Condition title="Backend - Using SDK" match={true}>

Point to the SDK config and the fields that need to be set

</Condition>

<Condition title="Frontend - Prebuilt UI" match={true}>

Point to the component that is used and how to integrate it

</Condition>

</Condition>

<Condition title="Passwordless Login" match={true}>

### Passwordless Login

<Condition title="Backend - Using SDK" match={true}>

Point to the SDK config and the fields that need to be set

</Condition>

<Condition title="Frontend - Prebuilt UI" match={true}>

Point to the component that is used and how to integrate it

</Condition>

</Condition>

## Session Verification

How sessions can be verified in your application server and how the MFA claim can be verified

## SuperTokens Core Setup

<Condition title="Has Example App" match={true}>

In our example app we used [try.supertokens.com](https://try.supertokens.com) to host the example app. You can replace the enpoint with your the correct one based on your configuration.

</Condition>

<Tabs defaultValue="ms"
values={[
{label: 'Managed service', value: 'ms'},
{label: 'Self hosted', value: 'ss'},
]}>
<TabItem value="ms">

Info and links to relevant doc pages

</TabItem>
<TabItem value="ss">

Info and links to relevant doc pages

</TabItem>
</Tabs>


## Next Steps

- [Learn how to protect your frontend routes](/docs/random)
- [Learn how to protect your backend routes](/docs/random)
- [Customize the look and feel of the pre-built UI](/docs/random)
- [See how you can manage your users and their metadata](/docs/random)






---------------------

</GuidePageContextProvider>

<!-- 
# Selection view
    ... some UI

# Architecture overview
    if (applicationServer is undefined) {
        normal diagram
    } else {
        diagram with applicationServer + node backend

        if (applicationServer is python or goalng) {
            Note: we say that even though we have a python / golang sdk, becuase you have selected MFA (which is not yet supported in them),
            we recommend that you use a separated node server.
        }
    }

if (hasExample app) {
    # Download demo app
}

if (example app available) {
    # Folder Structure
        if (applicationServer is defined) {
            Note: even though you selected <applicationBackend>, the example app 
downloaded will have a node backend which wil be the authServer for your
            application server.
        }
        - /backend folder: ...
        - /frontend folder: ...

    # Recipes initialised:
    ## Backend:
        if (multitenancy or mfa) {
            - fixed set of recieps for each
        } else {
            - dynamic recipes for each
        }
    ## Frontend:
        if (multitenancy or mfa) {
            - fixed set of recieps for each + pre built UI list
        } else {
            - dynamic recipes + pre built UI list for each
        }

    if (mulitenancy) {
        # Creating and configuring tenants
            - Talk about how tenants are created, and the api calls to make them
            if (backend is node || nextjs || remix) {
                also specify that you can use the dashboard to configure tenants
            }
            - Talk about getTenantId on the frontend supertokens-auth-react
    }
    if (mfa) {
        # Configuring MFA
            talk about how we configure MFA factors
            if (backend is node || nextjs || remix) {
                also specify that the dashboard can be used to configure mfa
            }
    }

    # Adding the supertokens middleware to your backend / auth server 
# (pick the right one based on if the applicationServer is defined or not)
        - Point to where the supertokens middleware is added and what it does.
        - Point to where the supertokens error handler is added and what it does.

    # Adding the pre built UI to your frontend
        if (frontend is react or nextjs or remix) {
            - Post to how the pre built UI is added and what it does 
(in multi tenancy, the function is called in the Auth component cause 
we want to show the UI for the tenant selected,
whereas in others, its directly in the routes component)
        } else if (frontend is angular or vue) {
            - Talk about their setup
        }
} else {
    # Backend integration / auth server setup steps overview (pick the right one based on if applicationServer is defined or not)
        - point to right part of the docs based on the auth method selected
        
        if (multi tenancy) {
            # Creating and configuring tenants
            Talk about how tenants are created, and the api calls to make them
            if (backend is node || nextjs || remix) {
                also specify that you can use the dashboard to configure tenants
            }
        }

        if (mfa) {
            # Configuring MFA
                talk about how we configure MFA factors
                if (backend is node || nextjs || remix) {
                    also specify that the dashboard can be used to configure mfa
                }
        }
    # Frontend integration steps overview
        if (custom UI) {
            ## Example app
                if (mobile app) {
                    link to relevant example app 
                } else {
                    link to web-js + vue example app
                }
            if (mobile app) {
                - talk that API calls need to be made manually,
and our frontend sdk does only session verification
                - point to right part of the docs
            } else {
                - talk about supertokens-web-js and that it providers helper functions + session management.
                - point to right part of the docs
            }
            if (using multi tenancy) {
                if (mobile app) {
                    - say tenant Id needs to be a part of the request path to the backend
                } else {
                    - you need to provide the impl for getTenantId in web-js
                }
            }

            if (using MFA) {
                if (mobile app) {
                    - talk about claims post first factor, 
and checking the factor info API and next array (using manual API calls)
                } else {
                    - talk about claims post first factor, 
and checking the factor info API and next array (using the web-js function)
                }
            }
        } else {
            // can come here in case other node framework other than nest or express. 
// Or, FE=nextjs || remix, backend=something else
            - talk about supertokens-auth-react and that it providers 
helper functions + session management.
            - point to right part of the docs.

            if (using multi tenancy) {
                - you need to provide the impl for getTenantId in auth-react
            }
        }
}

if (applicationServer is defined) {
    # Session verification in your application server
        - talk about how to verify the session in your application server
        if (using mfa) {
            - need to verify the mfa claim in the backend
        }
}

# Core setup
    if (Example app available) {
        - in the example, we use try supertokens.
    }
    ## Managed service

    ## Self hosted

# Navigating the docs
    - Link to frontend route protection
    - Link to backend route protecion
    if (using pre built ui) {
        Talk about styling / customisation (in )
    }
-->


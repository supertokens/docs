---
id: getsession
title: getSession
hide_title: true
---

import NodeJSFrameworkSubTabs from "/src/components/tabs/NodeJSFrameworkSubTabs"

## ``getSession(req, res, options)``
### Parameters
<NodeJSFrameworkSubTabs>
<TabItem value="express">

- ``req`` 
  - type: ``Express.Request``
- ``res`` 
  - type: ``Express.Response``
- ``options`` (Optional)
  - type: ``{antiCsrfCheck?: boolean, sessionRequired?: boolean}``

</TabItem>
<TabItem value="hapi">

- ``req`` 
  - type: ``Hapi.Request``
- ``res`` 
  - type: ``Hapi.ResponseToolkit``
- ``options`` (Optional)
  - type: ``{antiCsrfCheck?: boolean, sessionRequired?: boolean}``

</TabItem>
<TabItem value="fastify">

- ``req`` 
  - type: ``Fastify.FastifyRequest``
- ``res`` 
  - type: ``Fastify.FastifyReply``
- ``options`` (Optional)
  - type: ``{antiCsrfCheck?: boolean, sessionRequired?: boolean}``

</TabItem>
<TabItem value="awsLambda">

- ``req`` 
  - type: ``AWS.APIGatewayProxyEvent | AWS.APIGatewayProxyEventV2``
- ``res`` 
  - type: ``AWS.APIGatewayProxyEvent | AWS.APIGatewayProxyEventV2``
- ``options`` (Optional)
  - type: ``{antiCsrfCheck?: boolean, sessionRequired?: boolean}``

</TabItem>
<TabItem value="koa">

- ``req`` 
  - type: ``Koa.Context``
- ``res`` 
  - type: ``Koa.Context``
- ``options`` (Optional)
  - type: ``{antiCsrfCheck?: boolean, sessionRequired?: boolean}``

</TabItem>
<TabItem value="loopback">

- ``req`` 
  - type: ``Loopback.MiddlewareContext``
- ``res`` 
  - type: ``Loopback.MiddlewareContext``
- ``options`` (Optional)
  - type: ``{antiCsrfCheck?: boolean, sessionRequired?: boolean}``

</TabItem>
<TabItem value="nextjs">

- ``req`` 
  - type: ``Next.NextApiRequest``
- ``res`` 
  - type: ``Next.NextApiResponse``
- ``options`` (Optional)
  - type: ``{antiCsrfCheck?: boolean, sessionRequired?: boolean}``

</TabItem>
<TabItem value="nestjs">
NestJS uses library-specific types for Request and Response. You should use the one provided by your underlying framework (the default is Express)

- ``req`` 
  - type: ``Express.Request``
- ``res`` 
  - type: ``Express.Response``
- ``options`` (Optional)
  - type: ``{antiCsrfCheck?: boolean, sessionRequired?: boolean}``

</TabItem>
</NodeJSFrameworkSubTabs>

### Returns
- ``Promise<Session>``

### Throws
- If the session does not exist and `sessionRequired` is not `false`
- If the access token has expired, we need to try the refresh token.
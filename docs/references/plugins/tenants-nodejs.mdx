---
page_type: plugin-reference
---

# `@supertokens-plugins/tenants-nodejs`

## Classes

### DefaultPluginEmailService

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/defaultEmailService.ts:7](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/defaultEmailService.ts#L7)

Default email service that provides template generation but throws on send

#### Implements

- `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>

#### Constructors

##### Constructor

```ts
new DefaultPluginEmailService(): DefaultPluginEmailService;
```

###### Returns

[`DefaultPluginEmailService`](#defaultpluginemailservice)

#### Methods

##### generateEmailContent()

```ts
generateEmailContent(input: PluginEmailDeliveryInput): {
  html: string;
  subject: string;
  text: string;
};
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/defaultEmailService.ts:9](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/defaultEmailService.ts#L9)

Public method to generate email content - can be used in overrides

###### Parameters

| Parameter | Type |
| ------ | ------ |
| `input` | [`PluginEmailDeliveryInput`](#pluginemaildeliveryinput) |

###### Returns

```ts
{
  html: string;
  subject: string;
  text: string;
}
```

| Name | Type | Defined in |
| ------ | ------ | ------ |
| `html` | `string` | [supertokens-plugins/packages/tenants-nodejs/src/defaultEmailService.ts:14](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/defaultEmailService.ts#L14) |
| `subject` | `string` | [supertokens-plugins/packages/tenants-nodejs/src/defaultEmailService.ts:13](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/defaultEmailService.ts#L13) |
| `text` | `string` | [supertokens-plugins/packages/tenants-nodejs/src/defaultEmailService.ts:37](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/defaultEmailService.ts#L37) |

##### sendEmail()

```ts
sendEmail(input: PluginEmailDeliveryInput & {
  userContext: UserContext;
}): Promise<never>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/defaultEmailService.ts:76](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/defaultEmailService.ts#L76)

eslint-disable-next-line @typescript-eslint/no-unused-vars

###### Parameters

| Parameter | Type |
| ------ | ------ |
| `input` | [`PluginEmailDeliveryInput`](#pluginemaildeliveryinput) & \{ `userContext`: `UserContext`; \} |

###### Returns

[`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`never`\>

###### Implementation of

```ts
EmailDeliveryInterface.sendEmail
```

***

### PluginSMTPService

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/emailServices.ts:7](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/emailServices.ts#L7)

#### Implements

- `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>

#### Constructors

##### Constructor

```ts
new PluginSMTPService(config: {
  smtpSettings: {
     authUsername?: string;
     from: {
        email: string;
        name: string;
     };
     host: string;
     password: string;
     port: number;
     secure?: boolean;
  };
}): PluginSMTPService;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/emailServices.ts:11](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/emailServices.ts#L11)

###### Parameters

| Parameter | Type |
| ------ | ------ |
| `config` | \{ `smtpSettings`: \{ `authUsername?`: `string`; `from`: \{ `email`: `string`; `name`: `string`; \}; `host`: `string`; `password`: `string`; `port`: `number`; `secure?`: `boolean`; \}; \} |
| `config.smtpSettings` | \{ `authUsername?`: `string`; `from`: \{ `email`: `string`; `name`: `string`; \}; `host`: `string`; `password`: `string`; `port`: `number`; `secure?`: `boolean`; \} |
| `config.smtpSettings.authUsername?` | `string` |
| `config.smtpSettings.from` | \{ `email`: `string`; `name`: `string`; \} |
| `config.smtpSettings.from.email` | `string` |
| `config.smtpSettings.from.name` | `string` |
| `config.smtpSettings.host` | `string` |
| `config.smtpSettings.password` | `string` |
| `config.smtpSettings.port` | `number` |
| `config.smtpSettings.secure?` | `boolean` |

###### Returns

[`PluginSMTPService`](#pluginsmtpservice)

#### Methods

##### sendEmail()

```ts
sendEmail(input: PluginEmailDeliveryInput & {
  userContext: UserContext;
}): Promise<void>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/emailServices.ts:33](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/emailServices.ts#L33)

###### Parameters

| Parameter | Type |
| ------ | ------ |
| `input` | [`PluginEmailDeliveryInput`](#pluginemaildeliveryinput) & \{ `userContext`: `UserContext`; \} |

###### Returns

[`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`void`\>

###### Implementation of

```ts
EmailDeliveryInterface.sendEmail
```

## Type Aliases

### AssociateAllLoginMethodsOfUserWithTenant()

```ts
type AssociateAllLoginMethodsOfUserWithTenant = (tenantId: string, userId: string, loginMethodFilter?: (loginMethod: LoginMethod) => boolean) => Promise<void>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:77](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L77)

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `tenantId` | `string` |
| `userId` | `string` |
| `loginMethodFilter?` | (`loginMethod`: `LoginMethod`) => `boolean` |

#### Returns

[`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`void`\>

***

### ErrorResponse

```ts
type ErrorResponse = {
  message: string;
  status: "ERROR";
};
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:16](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L16)

#### Properties

| Property | Type | Defined in |
| ------ | ------ | ------ |
| <a id="message"></a> `message` | `string` | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:18](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L18) |
| <a id="status"></a> `status` | `"ERROR"` | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:17](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L17) |

***

### GetAppUrl()

```ts
type GetAppUrl = (appInfo: NormalisedAppinfo, request: BaseRequest | undefined, userContext: UserContext) => string;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:85](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L85)

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `appInfo` | `NormalisedAppinfo` |
| `request` | `BaseRequest` \| `undefined` |
| `userContext` | `UserContext` |

#### Returns

`string`

***

### GetUserIdsInTenantWithRole()

```ts
type GetUserIdsInTenantWithRole = (tenantId: string, role: string) => Promise<string[]>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:83](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L83)

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `tenantId` | `string` |
| `role` | `string` |

#### Returns

[`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`string`[]\>

***

### MetadataType

```ts
type MetadataType = ReturnType<typeof BaseFormSection>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:21](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L21)

***

### OverrideableTenantFunctionImplementation

```ts
type OverrideableTenantFunctionImplementation = {
  acceptInvitation: (code: string, tenantId: string, session: SessionContainerInterface, metadata: MetadataType) => Promise<
     | {
     status: "OK";
   }
    | ErrorResponse>;
  acceptTenantCreationRequest: (requestId: string, session: SessionContainerInterface, metadata: TenantCreationRequestMetadataType) => Promise<
     | {
     status: "OK";
   }
    | ErrorResponse>;
  addInvitation: (email: string, tenantId: string, role: string, metadata: MetadataType) => Promise<
     | {
     code: string;
     status: "OK";
   }
    | ErrorResponse>;
  addTenantCreationRequest: (session: SessionContainerInterface, tenantDetails: {
     firstFactors?: string[] | null;
     name: string;
   }, metadata: TenantCreationRequestMetadataType, appUrl: string, userContext: UserContext, sendEmail: SendPluginEmail) => Promise<
     | {
     status: "OK";
   }
    | ErrorResponse>;
  assignRoleToUserInTenant: (tenantId: string, userId: string, role: string) => Promise<void>;
  associateAllLoginMethodsOfUserWithTenant: AssociateAllLoginMethodsOfUserWithTenant;
  canApproveJoinRequest: (targetUser: User, tenantId: string, session: SessionContainerInterface) => Promise<boolean>;
  canApproveTenantCreationRequest: (targetUser: User, creationRequest: BaseFormSection, session: SessionContainerInterface) => Promise<boolean>;
  canCreateInvitation: (email: string, role: string, tenantId: string, session: SessionContainerInterface) => Promise<boolean>;
  canRemoveTargetUserFromTenant: (targetUser: User, tenantId: string, session: SessionContainerInterface) => Promise<boolean>;
  createTenantAndAssignAdmin: (tenantDetails: {
     firstFactors?: string[] | null;
     name: string;
   }, userId: string) => Promise<
     | {
     createdNew: boolean;
     status: "OK";
   }
    | ErrorResponse>;
  doesTenantCreationRequireApproval: (session: SessionContainerInterface) => Promise<boolean>;
  doesUserHaveTenantCreationRequest: (userId: string, metadata: TenantCreationRequestMetadataType) => Promise<boolean>;
  getAppUrl: GetAppUrl;
  getInvitations: (tenantId: string, metadata: MetadataType) => Promise<
     | {
     invitees: BaseFormSection[];
     status: "OK";
   }
    | ErrorResponse>;
  getPreferredTenantId: (tenantIds: string[], inputTenantId: string) => string | undefined;
  getTenantCreationRequests: (metadata: TenantCreationRequestMetadataType, userContext: UserContext) => Promise<
     | {
     status: "OK";
   } & {
     requests: BaseFormSection[];
   }
    | ErrorResponse>;
  getTenants: (session: SessionContainerInterface | string) => Promise<
     | {
     status: "OK";
   } & BaseFormSection
    | ErrorResponse>;
  getTenantUsers: (tenantId: string) => Promise<
     | {
     status: "OK";
     users: User & {
        roles?: string[];
     }[];
   }
    | ErrorResponse>;
  isAllowedToCreateTenant: (session: SessionContainerInterface) => Promise<boolean>;
  isAllowedToJoinTenant: (targetUser: User, session: SessionContainerInterface) => Promise<boolean>;
  rejectRequestToJoinTenant: (tenantId: string, userId: string) => Promise<
     | {
     status: "OK";
   }
    | ErrorResponse>;
  rejectTenantCreationRequest: (requestId: string, session: SessionContainerInterface, metadata: TenantCreationRequestMetadataType) => Promise<
     | {
     status: "OK";
   }
    | ErrorResponse>;
  removeInvitation: (email: string, tenantId: string, metadata: MetadataType) => Promise<
     | {
     status: "OK";
   }
    | ErrorResponse>;
  sendTenantCreationRequestEmail: (tenantId: string, creatorEmail: string, appUrl: string, userContext: UserContext, sendEmail: SendPluginEmail) => Promise<void>;
  shouldHaveTenantAccess: (userId: string, tenantId: string, userContext: UserContext) => Promise<{
     canAccess: boolean;
     reason?: string;
  }>;
};
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:91](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L91)

#### Properties

| Property | Type | Defined in |
| ------ | ------ | ------ |
| <a id="acceptinvitation"></a> `acceptInvitation` | (`code`: `string`, `tenantId`: `string`, `session`: `SessionContainerInterface`, `metadata`: [`MetadataType`](#metadatatype)) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `status`: `"OK"`; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:134](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L134) |
| <a id="accepttenantcreationrequest"></a> `acceptTenantCreationRequest` | (`requestId`: `string`, `session`: `SessionContainerInterface`, `metadata`: [`TenantCreationRequestMetadataType`](#tenantcreationrequestmetadatatype)) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `status`: `"OK"`; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:160](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L160) |
| <a id="addinvitation"></a> `addInvitation` | (`email`: `string`, `tenantId`: `string`, `role`: `string`, `metadata`: [`MetadataType`](#metadatatype)) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `code`: `string`; `status`: `"OK"`; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:123](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L123) |
| <a id="addtenantcreationrequest"></a> `addTenantCreationRequest` | (`session`: `SessionContainerInterface`, `tenantDetails`: \{ `firstFactors?`: `string`[] \| `null`; `name`: `string`; \}, `metadata`: [`TenantCreationRequestMetadataType`](#tenantcreationrequestmetadatatype), `appUrl`: `string`, `userContext`: `UserContext`, `sendEmail`: [`SendPluginEmail`](#sendpluginemail)) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `status`: `"OK"`; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:145](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L145) |
| <a id="assignroletouserintenant"></a> `assignRoleToUserInTenant` | (`tenantId`: `string`, `userId`: `string`, `role`: `string`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`void`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:181](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L181) |
| <a id="associateallloginmethodsofuserwithtenant-1"></a> `associateAllLoginMethodsOfUserWithTenant` | [`AssociateAllLoginMethodsOfUserWithTenant`](#associateallloginmethodsofuserwithtenant) | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:144](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L144) |
| <a id="canapprovejoinrequest"></a> `canApproveJoinRequest` | (`targetUser`: `User`, `tenantId`: `string`, `session`: `SessionContainerInterface`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`boolean`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:102](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L102) |
| <a id="canapprovetenantcreationrequest"></a> `canApproveTenantCreationRequest` | (`targetUser`: `User`, `creationRequest`: [`BaseFormSection`](profile-details-nodejs.mdx#baseformsection), `session`: `SessionContainerInterface`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`boolean`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:103](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L103) |
| <a id="cancreateinvitation"></a> `canCreateInvitation` | (`email`: `string`, `role`: `string`, `tenantId`: `string`, `session`: `SessionContainerInterface`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`boolean`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:96](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L96) |
| <a id="canremovetargetuserfromtenant"></a> `canRemoveTargetUserFromTenant` | (`targetUser`: `User`, `tenantId`: `string`, `session`: `SessionContainerInterface`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`boolean`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:108](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L108) |
| <a id="createtenantandassignadmin"></a> `createTenantAndAssignAdmin` | (`tenantDetails`: \{ `firstFactors?`: `string`[] \| `null`; `name`: `string`; \}, `userId`: `string`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `createdNew`: `boolean`; `status`: `"OK"`; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:113](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L113) |
| <a id="doestenantcreationrequireapproval"></a> `doesTenantCreationRequireApproval` | (`session`: `SessionContainerInterface`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`boolean`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:95](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L95) |
| <a id="doesuserhavetenantcreationrequest"></a> `doesUserHaveTenantCreationRequest` | (`userId`: `string`, `metadata`: [`TenantCreationRequestMetadataType`](#tenantcreationrequestmetadatatype)) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`boolean`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:179](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L179) |
| <a id="getappurl-1"></a> `getAppUrl` | [`GetAppUrl`](#getappurl) | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:177](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L177) |
| <a id="getinvitations"></a> `getInvitations` | (`tenantId`: `string`, `metadata`: [`MetadataType`](#metadatatype)) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `invitees`: [`BaseFormSection`](profile-details-nodejs.mdx#baseformsection)[]; `status`: `"OK"`; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:140](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L140) |
| <a id="getpreferredtenantid"></a> `getPreferredTenantId` | (`tenantIds`: `string`[], `inputTenantId`: `string`) => `string` \| `undefined` | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:180](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L180) |
| <a id="gettenantcreationrequests"></a> `getTenantCreationRequests` | (`metadata`: [`TenantCreationRequestMetadataType`](#tenantcreationrequestmetadatatype), `userContext`: `UserContext`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `status`: `"OK"`; \} & \{ `requests`: [`BaseFormSection`](profile-details-nodejs.mdx#baseformsection)[]; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:156](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L156) |
| <a id="gettenants"></a> `getTenants` | (`session`: `SessionContainerInterface` \| `string`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `status`: `"OK"`; \} & [`BaseFormSection`](profile-details-nodejs.mdx#baseformsection) \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:92](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L92) |
| <a id="gettenantusers"></a> `getTenantUsers` | (`tenantId`: `string`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `status`: `"OK"`; `users`: `User` & \{ `roles?`: `string`[]; \}[]; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:120](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L120) |
| <a id="isallowedtocreatetenant"></a> `isAllowedToCreateTenant` | (`session`: `SessionContainerInterface`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`boolean`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:94](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L94) |
| <a id="isallowedtojointenant"></a> `isAllowedToJoinTenant` | (`targetUser`: `User`, `session`: `SessionContainerInterface`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`boolean`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:93](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L93) |
| <a id="rejectrequesttojointenant"></a> `rejectRequestToJoinTenant` | (`tenantId`: `string`, `userId`: `string`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `status`: `"OK"`; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:178](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L178) |
| <a id="rejecttenantcreationrequest"></a> `rejectTenantCreationRequest` | (`requestId`: `string`, `session`: `SessionContainerInterface`, `metadata`: [`TenantCreationRequestMetadataType`](#tenantcreationrequestmetadatatype)) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `status`: `"OK"`; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:165](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L165) |
| <a id="removeinvitation"></a> `removeInvitation` | (`email`: `string`, `tenantId`: `string`, `metadata`: [`MetadataType`](#metadatatype)) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\< \| \{ `status`: `"OK"`; \} \| [`ErrorResponse`](#errorresponse)\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:129](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L129) |
| <a id="sendtenantcreationrequestemail"></a> `sendTenantCreationRequestEmail` | (`tenantId`: `string`, `creatorEmail`: `string`, `appUrl`: `string`, `userContext`: `UserContext`, `sendEmail`: [`SendPluginEmail`](#sendpluginemail)) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`void`\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:170](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L170) |
| <a id="shouldhavetenantaccess"></a> `shouldHaveTenantAccess` | (`userId`: `string`, `tenantId`: `string`, `userContext`: `UserContext`) => [`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<\{ `canAccess`: `boolean`; `reason?`: `string`; \}\> | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:182](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L182) |

***

### PluginEmailDeliveryInput

```ts
type PluginEmailDeliveryInput = 
  | {
  appUrl: string;
  customData?: Record<string, any>;
  email: string;
  senderEmail: string;
  tenantId: string;
  type: "TENANT_REQUEST_APPROVAL";
}
  | {
  appUrl: string;
  creatorEmail: string;
  customData?: Record<string, any>;
  email: string;
  tenantId: string;
  type: "TENANT_CREATE_APPROVAL";
};
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:25](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L25)

Define custom email input type for the plugin

***

### SendPluginEmail()

```ts
type SendPluginEmail = (input: PluginEmailDeliveryInput, userContext: UserContext) => Promise<void>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:75](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L75)

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `input` | [`PluginEmailDeliveryInput`](#pluginemaildeliveryinput) |
| `userContext` | `UserContext` |

#### Returns

[`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`void`\>

***

### SuperTokensPluginTenantPluginConfig

```ts
type SuperTokensPluginTenantPluginConfig = {
  allowPublicTenantAccess?: boolean;
  createRolesOnInit?: boolean;
  emailDelivery?: {
     override?: (originalImplementation: EmailDeliveryInterface<PluginEmailDeliveryInput>) => EmailDeliveryInterface<PluginEmailDeliveryInput>;
     service?: EmailDeliveryInterface<PluginEmailDeliveryInput>;
  };
  enableTenantListAPI?: boolean;
  requireNonPublicTenantAssociation?: boolean;
  requireTenantCreationRequestApproval?: boolean;
};
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:43](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L43)

#### Properties

| Property | Type | Description | Defined in |
| ------ | ------ | ------ | ------ |
| <a id="allowpublictenantaccess"></a> `allowPublicTenantAccess?` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:48](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L48) |
| <a id="createrolesoninit"></a> `createRolesOnInit?` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:47](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L47) |
| <a id="emaildelivery"></a> `emailDelivery?` | \{ `override?`: (`originalImplementation`: `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>) => `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>; `service?`: `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>; \} | Email delivery configuration - service is optional, override can provide sendEmail implementation | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:51](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L51) |
| `emailDelivery.override?` | (`originalImplementation`: `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>) => `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\> | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:53](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L53) |
| `emailDelivery.service?` | `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\> | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:52](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L52) |
| <a id="enabletenantlistapi"></a> `enableTenantListAPI?` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:46](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L46) |
| <a id="requirenonpublictenantassociation"></a> `requireNonPublicTenantAssociation?` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:44](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L44) |
| <a id="requiretenantcreationrequestapproval"></a> `requireTenantCreationRequestApproval?` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:45](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L45) |

***

### SuperTokensPluginTenantPluginNormalisedConfig

```ts
type SuperTokensPluginTenantPluginNormalisedConfig = {
  allowPublicTenantAccess: boolean;
  createRolesOnInit: boolean;
  emailDelivery?: {
     override?: (originalImplementation: EmailDeliveryInterface<PluginEmailDeliveryInput>) => EmailDeliveryInterface<PluginEmailDeliveryInput>;
     service?: EmailDeliveryInterface<PluginEmailDeliveryInput>;
  };
  enableTenantListAPI: boolean;
  requireNonPublicTenantAssociation: boolean;
  requireTenantCreationRequestApproval: boolean;
};
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:59](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L59)

#### Properties

| Property | Type | Description | Defined in |
| ------ | ------ | ------ | ------ |
| <a id="allowpublictenantaccess-1"></a> `allowPublicTenantAccess` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:64](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L64) |
| <a id="createrolesoninit-1"></a> `createRolesOnInit` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:63](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L63) |
| <a id="emaildelivery-1"></a> `emailDelivery?` | \{ `override?`: (`originalImplementation`: `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>) => `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>; `service?`: `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>; \} | Email delivery configuration - service is optional, override can provide sendEmail implementation | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:67](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L67) |
| `emailDelivery.override?` | (`originalImplementation`: `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\>) => `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\> | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:69](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L69) |
| `emailDelivery.service?` | `EmailDeliveryInterface`\<[`PluginEmailDeliveryInput`](#pluginemaildeliveryinput)\> | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:68](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L68) |
| <a id="enabletenantlistapi-1"></a> `enableTenantListAPI` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:62](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L62) |
| <a id="requirenonpublictenantassociation-1"></a> `requireNonPublicTenantAssociation` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:60](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L60) |
| <a id="requiretenantcreationrequestapproval-1"></a> `requireTenantCreationRequestApproval` | `boolean` | - | [supertokens-plugins/packages/tenants-nodejs/src/types.ts:61](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L61) |

***

### TenantCreationRequestMetadataType

```ts
type TenantCreationRequestMetadataType = ReturnType<typeof BaseFormSection>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/types.ts:22](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/types.ts#L22)

## Variables

### default

```ts
default: {
  init: any;
  SMTPService: typeof PluginSMTPService;
};
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/index.ts:19](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/index.ts#L19)

#### Type Declaration

| Name | Type | Default value | Defined in |
| ------ | ------ | ------ | ------ |
| <a id="init"></a> `init` | `any` | - | [supertokens-plugins/packages/tenants-nodejs/src/index.ts:20](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/index.ts#L20) |
| <a id="smtpservice"></a> `SMTPService` | *typeof* [`PluginSMTPService`](#pluginsmtpservice) | `PluginSMTPService` | [supertokens-plugins/packages/tenants-nodejs/src/index.ts:21](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/index.ts#L21) |

***

### getUserIdsInTenantWithRole

```ts
const getUserIdsInTenantWithRole: GetUserIdsInTenantWithRole;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/roles.ts:64](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/roles.ts#L64)

***

### HANDLE\_BASE\_PATH

```ts
const HANDLE_BASE_PATH: "/plugin/supertokens-plugin-tenants";
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/constants.ts:6](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/constants.ts#L6)

***

### init

```ts
const init: any;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/plugin.ts:36](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/plugin.ts#L36)

***

### METADATA\_KEY

```ts
const METADATA_KEY: "supertokens-plugin-tenants";
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/constants.ts:10](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/constants.ts#L10)

***

### PLUGIN\_ERROR\_NAME

```ts
const PLUGIN_ERROR_NAME: "supertokens-plugin-tenants-error";
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/constants.ts:8](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/constants.ts#L8)

***

### PLUGIN\_ID

```ts
const PLUGIN_ID: "supertokens-plugin-tenants" = "supertokens-plugin-tenants";
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/constants.ts:1](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/constants.ts#L1)

***

### PLUGIN\_SDK\_VERSION

```ts
const PLUGIN_SDK_VERSION: string[];
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/constants.ts:4](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/constants.ts#L4)

***

### PLUGIN\_VERSION

```ts
const PLUGIN_VERSION: "0.0.1" = "0.0.1";
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/constants.ts:2](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/constants.ts#L2)

***

### TENANT\_CREATE\_METADATA\_KEY

```ts
const TENANT_CREATE_METADATA_KEY: "supertokens-plugin-tenants-tenant-create-requests";
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/constants.ts:11](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/constants.ts#L11)

***

### TENANT\_CREATE\_METADATA\_REQUESTS\_KEY

```ts
const TENANT_CREATE_METADATA_REQUESTS_KEY: "requests" = "requests";
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/constants.ts:12](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/constants.ts#L12)

## Functions

### assignAdminToUserInTenant()

```ts
function assignAdminToUserInTenant(tenantId: string, userId: string): Promise<void>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/roles.ts:51](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/roles.ts#L51)

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `tenantId` | `string` |
| `userId` | `string` |

#### Returns

[`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`void`\>

***

### assignRoleToUserInTenant()

```ts
function assignRoleToUserInTenant(
   tenantId: string, 
   userId: string, 
role: string): Promise<void>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/roles.ts:31](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/roles.ts#L31)

Default definition of `assignRoleToUserInTenant` to be exported
to be usable without having to initialize the plugin.

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `tenantId` | `string` |
| `userId` | `string` |
| `role` | `string` |

#### Returns

[`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`void`\>

***

### createRoles()

```ts
function createRoles(): Promise<void>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/roles.ts:7](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/roles.ts#L7)

#### Returns

[`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<`void`\>

***

### extractInvitationCodeAndTenantId()

```ts
function extractInvitationCodeAndTenantId(req: BaseRequest): Promise<{
  code: any;
  shouldAcceptInvite: boolean;
  tenantId: any;
}>;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/util.ts:19](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/util.ts#L19)

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `req` | `BaseRequest` |

#### Returns

[`Promise`](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise)\<\{
  `code`: `any`;
  `shouldAcceptInvite`: `boolean`;
  `tenantId`: `any`;
\}\>

***

### getOverrideableTenantFunctionImplementation()

```ts
function getOverrideableTenantFunctionImplementation(pluginConfig: SuperTokensPluginTenantPluginConfig): OverrideableTenantFunctionImplementation;
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/pluginImplementation.ts:32](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/pluginImplementation.ts#L32)

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `pluginConfig` | [`SuperTokensPluginTenantPluginConfig`](#supertokensplugintenantpluginconfig) |

#### Returns

[`OverrideableTenantFunctionImplementation`](#overrideabletenantfunctionimplementation)

***

### hasPermissions()

```ts
function hasPermissions(permissions: string[]): (globalValidators: SessionClaimValidator[]) => SessionClaimValidator[];
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/util.ts:12](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/util.ts#L12)

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `permissions` | `string`[] |

#### Returns

```ts
(globalValidators: SessionClaimValidator[]): SessionClaimValidator[];
```

##### Parameters

| Parameter | Type |
| ------ | ------ |
| `globalValidators` | `SessionClaimValidator`[] |

##### Returns

`SessionClaimValidator`[]

***

### validateWithoutClaims()

```ts
function validateWithoutClaims(keys: string[]): (existingValidators: SessionClaimValidator[]) => SessionClaimValidator[];
```

Defined in: [supertokens-plugins/packages/tenants-nodejs/src/util.ts:5](https://github.com/supertokens/supertokens-plugins/blob/main/packages/tenants-nodejs/src/util.ts#L5)

#### Parameters

| Parameter | Type |
| ------ | ------ |
| `keys` | `string`[] |

#### Returns

```ts
(existingValidators: SessionClaimValidator[]): SessionClaimValidator[];
```

##### Parameters

| Parameter | Type |
| ------ | ------ |
| `existingValidators` | `SessionClaimValidator`[] |

##### Returns

`SessionClaimValidator`[]

---
title: Testing
hide_title: true
hide_table_of_contents: true
sidebar_position: 3
description: Testing changes
page_type: overview
category: contribute
---

# Testing

## Prerequisites

- Install `docker`
    - [Docker Desktop](https://docs.docker.com/desktop/) is convenient to install and use, and includes a Docker Engine.
    - [Docker Engine](https://docs.docker.com/engine/install/) is the minimum requirement to spin up containers required for tests.

<RepositoryTabs>

    <RepositoryTabs.TabItem value="supertokens-node">

    </RepositoryTabs.TabItem>

    <RepositoryTabs.TabItem value="supertokens-python">

        1. Setup repositories for integration/end-to-end testing
            1. [supertokens-auth-react](https://github.com/supertokens/supertokens-auth-react)
            2. [backend-sdk-testing](https://github.com/supertokens/backend-sdk-testing)

    </RepositoryTabs.TabItem>

</RepositoryTabs>

## Unit Tests
<RepositoryTabs>

    <RepositoryTabs.TabItem value="supertokens-node">

    </RepositoryTabs.TabItem>

    <RepositoryTabs.TabItem value="supertokens-python">

        ### Run all tests
        1. Run `make test`
            1. Note: This starts up and tears down docker containers required for the tests to run
            2. Defaults to using the latest `supertokens-core` image
                1. Set the `SUPERTOKENS_CORE_VERSION` environment to pull a different image

        ### Run individual tests
        1. Run `docker compose up --wait` to start up the required containers
        2. Run tests
            1. `pytest tests/<path_to_file>` to run a single file
            2. `pytest tests/<path_to_file>::<test_function>` to run a single test

    </RepositoryTabs.TabItem>

</RepositoryTabs>


## Backend SDK Testing
Integration tests to test backend SDK functionality.

<RepositoryTabs>

    <RepositoryTabs.TabItem value="supertokens-node">

    </RepositoryTabs.TabItem>

    <RepositoryTabs.TabItem value="supertokens-python">

        1. Start docker containers
            1.  `docker compose up --wait`
        2. Set environment variables
            1. `export SUPERTOKENS_ENV=testing`
            2. `export TEST_MODE=testing`
            3. `export API_PORT=3030`
        3. Start the application server:
            1. Navigate to `supertokens-python/test/test-server`
            2. `python app.py`
        4. Run `backend-sdk-testing` tests
            1. Navigate to `backend-sdk-testing`
            2. `npm install`
            3. `npm run build`
            4. `npm test`

    </RepositoryTabs.TabItem>

</RepositoryTabs>

## Auth-React Tests
End-to-end tests using `supertokens-auth-react` as the frontend.

<RepositoryTabs>

    <RepositoryTabs.TabItem value="supertokens-node">

    </RepositoryTabs.TabItem>

    <RepositoryTabs.TabItem value="supertokens-python">

        1. Start docker containers
            1.  `docker compose up --wait`
        2. Set environment variables
            1. `export SUPERTOKENS_ENV=testing`
            2. `export TEST_MODE=testing`
            3. `export APP_SERVER=8083`
            4. `export NODE_PORT=8082`
            5. `export PORT=3031`
            6. `export REACT_APP_API_PORT=8083`
        3. Start the application server:
            1. Django
                1. Navigate to `supertokens-python/tests/auth-react/django3x`
                2. `uvicorn mysite.asgi:application --port 8083`
            2. FastAPI
                1. Navigate to `supertokens-python/tests/auth-react/fastapi-server`
                2. `uvicorn app:app --host 0.0.0.0 --port 8083`
            3. Flask
                1. Navigate to `supertokens-python/tests/auth-react/flask-server`
                2. `python3 app.py --port 8083`
        4. Setup `supertokens-auth-react`
            1. Navigate to `supertokens-auth-react`
            2. `npm install`
        5. Run `supertokens-auth-react` tests
            1. Navigate to `supertokens-auth-react/test/server` in a new terminal
            2. `npm install`
            3. `node .`
            3. Navigate to `supertokens-auth-react/examples/for-tests` in a new terminal
            4. `npm install`
            6. `npm start`
            6. Wait a few seconds for the frontend application to start
            7. Run tests
                1. ALl tests: `npx mocha`
                2. Specific specs: `npx mocha --spec <path_to_spec>`

    </RepositoryTabs.TabItem>

</RepositoryTabs>


## Website Tests
End-to-end tests using `supertokens-website` as the frontend.

<RepositoryTabs>

    <RepositoryTabs.TabItem value="supertokens-node">

    </RepositoryTabs.TabItem>

    <RepositoryTabs.TabItem value="supertokens-python">

        1. Start docker containers
            1.  `docker compose up --wait`
        2. Set environment variables
            1. `export SUPERTOKENS_ENV=testing`
            2. `export TEST_MODE=testing`
        3. Start the application and cross-domain servers:
            2. Django2
                1. Navigate to `supertokens-python/tests/frontendIntegration/django2x` in two new terminals
                2. `make with-django2x`
                3. `gunicorn mysite.wsgi --bind 0.0.0.0:8080` in terminal 1
                4. `gunicorn mysite.wsgi --bind 0.0.0.0:8082` in terminal 2
            3. Django3
                1. Navigate to `supertokens-python/tests/frontendIntegration/django3x` in two new terminals
                2. `make with-django`
                3. `uvicorn mysite.asgi:application --port 8080` in terminal 1
                4. `uvicorn mysite.asgi:application --port 8082` in terminal 2
            4. DRF Sync
                1. Navigate to `supertokens-python/tests/frontendIntegration/drf_sync` in two new terminals
                2. `make with-drf`
                3. `gunicorn mysite.wsgi --bind 0.0.0.0:8080` in terminal 1
                4. `gunicorn mysite.wsgi --bind 0.0.0.0:8082` in terminal 2
            5. DRF Async
                1. Navigate to `supertokens-python/tests/frontendIntegration/drf_async` in two new terminals
                2. `make with-drf`
                3. `uvicorn mysite.asgi:application --port 8080` in terminal 1
                4. `uvicorn mysite.asgi:application --port 8082` in terminal 2
            6. FastAPI
                1. Navigate to `supertokens-python/tests/frontendIntegration/fastapi-server` in two new terminals
                2. `make with-fastapi`
                3. `uvicorn app:app --host 0.0.0.0 --port 8080` in terminal 1
                4. `uvicorn app:app --host 0.0.0.0 --port 8082` in terminal 2
            6. Flask
                1. Navigate to `supertokens-python/tests/frontendIntegration/flask-server` in two new terminals
                2. `make with-flask`
                3. `python3 app.py --port 8080` in terminal 1
                4. `python3 app.py --port 8082` in terminal 2
        4. Setup `supertokens-website`
            1. Navigate to `supertokens-website`
            2. `npm install`
        5. Run `supertokens-website` tests
            1. Navigate to `supertokens-website/test/server` in a new terminal
            2. `npm install`
            3. `NODE_PORT=8081 node .`
            3. Navigate to `supertokens-website/` in a new terminal
            7. Run tests
                1. `npm test`

    </RepositoryTabs.TabItem>

</RepositoryTabs>
---
title: Authenticate MCP Servers
hide_title: true
sidebar_position: 1
pagination_next: null
pagination_prev: null
skip_llms_txt: true
description: >-
  Authenticate MCP server actions using the SuperTokens MCP plugin 
  to use with AI tools and agents.
---

# Authenticate MCP Servers

This guide explains how to authenticate MCP Servers using the provided code snippet. Follow the steps below to integrate and initialize your MCP server with SuperTokens.

## Overview

This guide covers the following topics:

-  Installing the MCP plugin.
-  Initializing the plugin.
-  Registering tools.
-  Initializing the SDK.

We use a sample code snippet to illustrate the server configuration and how to add administrative tools.

## Before you start

Before setting up your MCP servers, ensure you have:

-  Installed the required packages (e.g., **mcp-plugin** and its dependencies).
-  Configured your authentication system with SuperTokens.
-  Setup your development environment with Node.js.

Review your permission requirements, as the servers validate user roles to authorize access.

## Steps

### 1. Install the plugin

Install the MCP plugin via npm:

```bash
npm install mcp-plugin
```

 Ensure that all dependencies for SuperTokens are also installed according to your project requirements.

### 2. Initialize the plugin

In your project file, import the necessary components and initialize your MCP server. The following example shows how to create an instance of ⁠SuperTokensMCPServer and configure its basic parameters:

```ts
import { MCPPlugin, SuperTokensMCPServer, AdminToolMCPServer } from "mcp-plugin";

const mcpServer = new SuperTokensMCPServer({
    name: "mcp-server",
    version: "1.0.0",
    path: "/mcp-server-for-admins",
    claimValidators: [{
        UserRoles.validate.includesAll("admin")
    }],
});
```

### 3. Register your tools

Register the tool with your MCP server. This step involves defining the tool name, description, and an execution function that processes the input and returns an output. The execution function used in the example fetches a user by ID and returns a simple greeting:

```ts

mcpServer.registerTool({
    name: "mcp-server",
    description: "A tool for the mcp-server",
    execute: (toolInput, extra) => {
        const { user } = getUserById(extra._meta.accessTokenPayload.sub);
        return {
            output: "Hello, world!",
        };
    },
});
```

Create an administrative version of the MCP server using the ⁠AdminToolMCPServer class. This server uses a different claim validator to enforce additional role-based constraints:


### 4. Initialize the SDK

Finally, initialize the SuperTokens SDK and add the MCP plugin to your SuperTokens configuration. The MCP plugin is provided with both the standard and administrative server configurations:

```ts
SuperTokens.init({
    plugins: [
        new MCPPlugin({
            mcpServers: [mcpServer, adminToolMCPServer],
        }),
    ],
})
```

